<odoo>
    <record id="ai_action_get_lead_info" model="ir.actions.server">
        <field name="name">Obtener Lead/Oportunidad</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="state">code</field>
        <field name="code">
result = env['ai.crm.actions'].get_lead_info(lead_name)
        </field>
        <field name="use_in_ai">True</field>
        <field name="ai_tool_description">Consulta información de un lead u oportunidad por nombre</field>
        <field name="ai_action_prompt">Cuando el usuario pide información de un lead u oportunidad, usa esta herramienta</field>
    </record>

    <record id="ai_action_list_open_opportunities" model="ir.actions.server">
        <field name="name">Listar Oportunidades Abiertas</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="state">code</field>
        <field name="code">
result = env['ai.crm.actions'].list_open_opportunities(limit or 10)
        </field>
        <field name="use_in_ai">True</field>
        <field name="ai_tool_description">Lista oportunidades abiertas con probabilidad y valor esperado</field>
        <field name="ai_action_prompt">Cuando el usuario pide oportunidades abiertas, usa esta herramienta</field>
    </record>

    <record id="ai_action_pipeline_summary" model="ir.actions.server">
        <field name="name">Resumen del Pipeline</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="state">code</field>
        <field name="code">
result = env['ai.crm.actions'].get_pipeline_summary()
        </field>
        <field name="use_in_ai">True</field>
        <field name="ai_tool_description">Resume el pipeline por etapa con conteo y valor total</field>
        <field name="ai_action_prompt">Cuando el usuario pide un resumen del pipeline, usa esta herramienta</field>
    </record>

    <record id="ai_action_search_leads_by_stage" model="ir.actions.server">
        <field name="name">Buscar Leads por Etapa</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="state">code</field>
        <field name="code">
result = env['ai.crm.actions'].search_leads_by_stage(stage_name)
        </field>
        <field name="use_in_ai">True</field>
        <field name="ai_tool_description">Busca leads u oportunidades por etapa especificada</field>
        <field name="ai_action_prompt">Cuando el usuario pregunta por leads en una etapa, usa esta herramienta</field>
    </record>

    <record id="ai_action_create_opportunity" model="ir.actions.server">
        <field name="name">Crear Oportunidad</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="state">code</field>
        <field name="code">
exp_rev = 0.0
if expected_revenue:
    try:
        if isinstance(expected_revenue, str):
            exp_rev = float(''.join(c for c in expected_revenue if c.isdigit() or c == '.'))
        else:
            exp_rev = float(expected_revenue)
    except:
        exp_rev = 0.0

result = env['ai.crm.actions'].create_opportunity(
    name=name,
    customer_name=customer_name,
    email=email,
    phone=phone,
    stage_name=stage_name,
    expected_revenue=exp_rev
)
        </field>
        <field name="use_in_ai">True</field>
        <field name="ai_tool_description">Crea una oportunidad CRM con nombre, cliente, email, teléfono, etapa e ingreso esperado</field>
        <field name="ai_action_prompt">Cuando el usuario pide crear una oportunidad, SIEMPRE extrae ESTOS 6 PARÁMETROS OBLIGATORIOS:
- name: nombre de la oportunidad
- customer_name: nombre del cliente
- email: email
- phone: teléfono
- stage_name: etapa (New, Qualified, Proposition, Won)
- expected_revenue: número del ingreso esperado</field>
    </record>
</odoo>